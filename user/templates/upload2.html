{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{% static 'upload/basic.css' %}">
    <link rel="stylesheet" href="{% static 'upload/bootstrap.min.css' %}">
    <title>Document</title>
</head>
<body>
<h1>this is not a header</h1>
<div class="upload-main">
    <form action="/file-upload" class="dropzone">
        <form action="UploadImages"
              class="dropzone"
              id="my-awesome-dropzone" enctype="multipart/form-data">
        </form>
    </form>
</div>
</body>
<script src="{% static 'upload/jquery-3.2.1.js' %}"></script>
<script src="{% static 'upload/dropzone.js' %}"></script>
<script type="text/javascript">
    Dropzone.options.myAwesomeDropzone = {
        paramName: "file",
        maxFilesize: 10,
        url: 'UploadImages',
        previewsContainer: "#dropzone-previews",
        uploadMultiple: true,
        parallelUploads: 5,
        maxFiles: 20,
        init: function () {
            var cd;
            this.on("success", function (file, response) {
                $('.dz-progress').hide();
                $('.dz-size').hide();
                $('.dz-error-mark').hide();
                console.log(response);
                console.log(file);
                cd = response;
            });
            this.on("addedfile", function (file) {
                var removeButton = Dropzone.createElement("<a href=\"#\">Remove file</a>");
                var _this = this;
                removeButton.addEventListener("click", function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    _this.removeFile(file);
                    var name = "largeFileName=" + cd.pi.largePicPath + "&smallFileName=" + cd.pi.smallPicPath;
                    $.ajax({
                        type: 'POST',
                        url: 'DeleteImage',
                        data: name,
                        dataType: 'json'
                    });
                });
                file.previewElement.appendChild(removeButton);
            });
        }
    };
</script>
</html>